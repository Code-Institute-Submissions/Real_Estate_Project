{% extends 'base.html' %}

{% load staticfiles %}

{% block page_title %} Property Deatails {% endblock %}


{% block content %}
<div class="container">
	<div class="card-deck col-sm-12 col-md-12">
		<div class="card">

			<div class="plan">
				<div class="col-sm-12">
					<h1><p> {{ listing.title }} </p></h1>
				</div>
			</div>



			<!-- Container for the image gallery -->
			<div class="container">

				<!-- Full-width images with number ---->
				<div class="mySlides">
					<div class="numbertext">1 / 3</div>
					<img src="{{ MEDIA_URL }}{{ listing.photos }}" style="width:100%">
                </div>

				<div class="mySlides">
				    <div class="numbertext">2 / 3</div>
					<img src="{{ MEDIA_URL }}{{ listing.photo1 }}" style="width:100%">
                 </div>

				<div class="mySlides">
					<div class="numbertext">3 / 3</div>
					<img src="{{ MEDIA_URL }}{{ listing.photo2 }}" style="width:100%">
                </div>

				<!-- Next and previous buttons -->
				<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
				<a class="next" onclick="plusSlides(1)">&#10095;</a>


				<!-- Thumbnail images -->
				<div class="row">
					<div class="column">
						<img class="demo cursor" src="{{ MEDIA_URL }}{{ listing.photos }}" style="width:100%" onclick="currentSlide(1)">
                    </div>
				    <div class="column">
					<img class="demo cursor" src="{{ MEDIA_URL }}{{ listing.photo1 }}" style="width:100%" onclick="currentSlide(2)">
                    </div>
				    <div class="column">
					<img class="demo cursor" src="{{ MEDIA_URL }}{{ listing.photo2 }}" style="width:100%" onclick="currentSlide(3)">
                    </div>

	            </div>
            </div>

	        <div class="card-body col-sm-12 description">
		<div class="card-text">
			<p><h2> Â£{{ listing.price }} {% if listing.rent %} pmc {% endif %}</h2></p>
		</div>

 		<div class="card-text">
			<p><i class="fa fa-road"> {{ listing.address }}, {{ listing.city }}, {{ listing.postcode }}</i></p>
		</div>

		<div class="card-text">
			<p>
				<i class="fa fa-bed"> {{ listing.bedrooms }} Beds </i> &nbsp;
				<i class="fa fa-bath"> {{ listing.bathrooms }} Baths </i> &nbsp;
				<i class="fa fa-tv"> {{ listing.rooms }} Room </i> &nbsp;
				<i class="fa fa-tree"> Garden <input type="checkbox" name="garden" {% if listing.garden %} checked {% endif %} disabled> </i>&nbsp;
				<i class="fa fa-car"> Garage <input type="checkbox" name="garage" {% if listing.garage %} checked {% endif %} disabled> </i>
			</p>
		</div>

		<div class="card-tex">
			<strong>Property Description:</strong>
			<p> {{ listing.description }} </p>
		</div>

		<div class="card-tex">
			<strong>Agency:</strong> {{ listing.user}}
			<p><strong>Contact:</strong> {{ listing.user.email }}</p>
		</div>

		{% if user.is_authenticated and listing.user == request.user %}
		<a href="{% url 'edit_property' listing.id %}" class="btn butt">Edit Details</a>
		<a href="{% url 'delete' listing.id %}" class="btn butt">Delete Property</a>
		{% endif %}

        </div>

		<div id="map"></div>

		<script>
		    let propertyLat = {{property.lat}}
		    let propertyLng = {{property.lng}}
		</script>
		<script src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"></script>
		<!-- Replace the value of the key parameter with your own API key. -->
		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&callback=initMap">
		</script>
        		
        </div>
    </div>
</div>



	{% endblock %}